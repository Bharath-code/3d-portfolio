<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Portfolio</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts for better typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- GSAP for smooth animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        /* Custom Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #e2e8f0;
            overflow: hidden; /* Prevent scrollbars on the body */
        }

        #bg {
            position: fixed;
            top: 0;
            left: 0;
            outline: none;
            z-index: 1;
        }

        .ui-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allow clicks to pass through to the canvas */
            z-index: 2;
        }
        
        .ui-element {
            pointer-events: auto; /* Re-enable pointer events for UI elements */
        }

        /* Glassmorphism effect */
        .glass-panel {
            background: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Custom scrollbar for the info panel */
        #info-content::-webkit-scrollbar {
            width: 6px;
        }
        #info-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        #info-content::-webkit-scrollbar-thumb {
            background: rgba(99, 102, 241, 0.8);
            border-radius: 10px;
        }
        #info-content::-webkit-scrollbar-thumb:hover {
            background: #6366f1;
        }
        
        /* Custom animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .loader-spin {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>

    <!-- Loader -->
    <div id="loader" class="fixed inset-0 bg-gray-900/80 backdrop-blur-sm z-50 flex flex-col items-center justify-center text-white">
        <div class="w-16 h-16 border-4 border-indigo-400 border-t-transparent rounded-full loader-spin"></div>
        <p class="mt-4 text-lg font-medium">Loading 3D Experience...</p>
        <p class="text-sm text-gray-400">Tech Stack: Three.js, Tailwind CSS, GSAP</p>
    </div>

    <!-- 3D Canvas -->
    <canvas id="bg"></canvas>

    <!-- UI Overlay -->
    <div class="ui-container flex flex-col p-4 md:p-8">
        <!-- Header -->
        <header id="header" class="ui-element w-full flex justify-between items-center transition-opacity duration-500">
            <div>
                <h1 id="user-name" class="text-2xl md:text-3xl font-bold text-white"></h1>
                <p id="user-title" class="text-md md:text-lg text-indigo-300"></p>
            </div>
            <div id="contact-links" class="flex space-x-4">
                <!-- Contact links will be injected here -->
            </div>
        </header>

        <!-- Main Content Panel -->
        <main class="flex-grow flex items-center justify-center relative">
            <div id="intro-text" class="text-center max-w-2xl ui-element transition-opacity duration-500">
                <h2 class="text-3xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-cyan-400 mb-4">Welcome to My Interactive Portfolio</h2>
                <p class="text-gray-300 md:text-xl">Navigate the 3D space with your mouse. Click on the orbiting nodes to explore my skills, projects, and experience.</p>
            </div>
        </main>

        <!-- Info Panel (Initially Hidden) -->
        <div id="info-panel" class="ui-element absolute bottom-0 left-0 md:left-auto md:right-8 md:bottom-8 w-full md:w-1/3 max-w-lg h-3/5 md:h-auto md:max-h-[60vh] glass-panel rounded-t-2xl md:rounded-2xl shadow-2xl shadow-black/50 transform translate-y-full transition-transform duration-500 ease-in-out">
            <div class="p-6 h-full flex flex-col">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="info-title" class="text-2xl font-bold text-white"></h3>
                    <button id="close-panel" class="p-2 rounded-full hover:bg-white/10 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
                <div id="info-content" class="overflow-y-auto pr-2 space-y-4">
                    <!-- Content will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Three.js and modules -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
        }
    }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { FontLoader } from 'three/addons/loaders/FontLoader.js';
        import { TextGeometry } from 'three/addons/geometries/TextGeometry.js';

        // --- 1. YOUR RESUME DATA (JSON FORMAT) ---
        // Replace this with your actual data.
        const resumeData = {
            name: "Your Name",
            title: "Creative Web Developer & 3D Artist",
            contact: {
                email: "your.email@example.com",
                linkedin: "https://linkedin.com/in/yourprofile",
                github: "https://github.com/yourprofile",
                portfolio: "https://your-portfolio.com"
            },
            about: {
                title: "About Me",
                description: "I am a passionate developer with a love for creating beautiful, functional, and interactive digital experiences. With a strong foundation in modern web technologies and a keen eye for design, I specialize in bringing ideas to life on the web, from sleek user interfaces to immersive 3D environments."
            },
            skills: {
                title: "Skills",
                description: "A selection of my technical skills and proficiencies.",
                categories: [
                    { name: "Frontend", items: ["HTML5", "CSS3", "JavaScript (ES6+)", "React", "Vue.js", "Tailwind CSS"] },
                    { name: "Backend", items: ["Node.js", "Express", "Python", "Django", "MongoDB", "PostgreSQL"] },
                    { name: "3D/Graphics", items: ["Three.js", "WebGL", "Blender", "Figma"] },
                    { name: "Tools", items: ["Git", "Webpack", "Docker", "Jest"] }
                ]
            },
            experience: {
                title: "Experience",
                jobs: [
                    {
                        company: "Tech Solutions Inc.",
                        role: "Senior Frontend Developer",
                        period: "2020 - Present",
                        description: "Led the development of interactive data visualization dashboards using React and D3.js. Architected and implemented a new design system, improving development efficiency by 30%. Mentored junior developers and conducted code reviews."
                    },
                    {
                        company: "Creative Agency",
                        role: "Web Developer",
                        period: "2018 - 2020",
                        description: "Developed and maintained client websites using WordPress, Vue.js, and custom APIs. Collaborated with designers to create responsive and pixel-perfect user interfaces. Optimized websites for performance and SEO, achieving a 50% improvement in load times."
                    }
                ]
            },
            projects: {
                title: "Projects",
                items: [
                    {
                        name: "Project Nebula",
                        description: "An interactive 3D solar system explorer built with Three.js and React. Features realistic planet textures, orbital mechanics, and informational pop-ups.",
                        tech: ["Three.js", "React", "GSAP"],
                        link: "#"
                    },
                    {
                        name: "E-commerce Platform",
                        description: "A full-stack e-commerce site with features like product search, user authentication, and a Stripe-integrated checkout process.",
                        tech: ["Node.js", "MongoDB", "React", "Tailwind CSS"],
                        link: "#"
                    },
                    {
                        name: "AI Art Generator",
                        description: "A web application that uses a fine-tuned Stable Diffusion model to generate unique images from text prompts.",
                        tech: ["Python", "Flask", "Next.js"],
                        link: "#"
                    }
                ]
            }
        };

        // --- 2. SCENE SETUP ---
        let scene, camera, renderer, controls;
        let centralObject, stars;
        const nodes = [];
        let intersectedObject = null;
        const mouse = new THREE.Vector2();
        const raycaster = new THREE.Raycaster();
        
        const loaderDOM = document.getElementById('loader');
        const canvas = document.getElementById('bg');
        const infoPanel = document.getElementById('info-panel');
        const infoTitle = document.getElementById('info-title');
        const infoContent = document.getElementById('info-content');
        const closePanelBtn = document.getElementById('close-panel');
        const introText = document.getElementById('intro-text');
        const header = document.getElementById('header');

        function init() {
            // Scene
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x000000, 0.001);

            // Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 30;

            // Renderer
            renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // Controls
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enablePan = false;
            controls.minDistance = 15;
            controls.maxDistance = 60;

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0x8a2be2, 2, 200);
            pointLight.position.set(5, 5, 15);
            scene.add(pointLight);
            
            const directionalLight = new THREE.DirectionalLight(0x00ffff, 1);
            directionalLight.position.set(-10, -5, -20);
            scene.add(directionalLight);

            // Populate UI with resume data
            populateUI();
            
            // Create 3D objects
            createCentralObject();
            createDataNodes();
            createStars();
            
            // Event Listeners
            window.addEventListener('resize', onWindowResize);
            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('click', onClick);
            closePanelBtn.addEventListener('click', hideInfoPanel);
            
            // Hide loader and start animation
            loaderDOM.style.display = 'none';
            animate();
        }
        
        // --- 3. UI LOGIC ---
        function populateUI() {
            document.getElementById('user-name').textContent = resumeData.name;
            document.getElementById('user-title').textContent = resumeData.title;
            
            const contactLinks = document.getElementById('contact-links');
            const iconMap = {
                linkedin: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>`,
                github: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>`,
                portfolio: `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>`
            };
            
            Object.keys(resumeData.contact).forEach(key => {
                if(key !== 'email' && resumeData.contact[key]) {
                    const a = document.createElement('a');
                    a.href = resumeData.contact[key];
                    a.target = "_blank";
                    a.rel = "noopener noreferrer";
                    a.className = "text-gray-400 hover:text-white transition-colors";
                    a.innerHTML = iconMap[key];
                    contactLinks.appendChild(a);
                }
            });
        }
        
        function showInfoPanel(dataKey) {
            const data = resumeData[dataKey];
            if (!data) return;

            infoTitle.textContent = data.title;
            let contentHTML = '';

            if (dataKey === 'about') {
                contentHTML = `<p class="text-gray-300">${data.description}</p>`;
            } else if (dataKey === 'skills') {
                contentHTML = `<p class="text-gray-400 mb-4">${data.description}</p>`;
                data.categories.forEach(category => {
                    contentHTML += `
                        <div class="mb-4">
                            <h4 class="font-semibold text-indigo-300 mb-2">${category.name}</h4>
                            <div class="flex flex-wrap gap-2">
                                ${category.items.map(item => `<span class="bg-gray-700 text-gray-200 text-sm font-medium px-3 py-1 rounded-full">${item}</span>`).join('')}
                            </div>
                        </div>
                    `;
                });
            } else if (dataKey === 'experience') {
                contentHTML = data.jobs.map(job => `
                    <div class="mb-4 p-4 bg-white/5 rounded-lg">
                        <div class="flex justify-between items-baseline">
                           <h4 class="font-bold text-lg text-white">${job.role}</h4>
                           <p class="text-sm text-gray-400">${job.period}</p>
                        </div>
                        <p class="text-md text-indigo-300 mb-2">${job.company}</p>
                        <p class="text-gray-300 text-sm">${job.description}</p>
                    </div>
                `).join('');
            } else if (dataKey === 'projects') {
                contentHTML = data.items.map(project => `
                    <div class="mb-4 p-4 bg-white/5 rounded-lg">
                        <a href="${project.link}" target="_blank" rel="noopener noreferrer" class="font-bold text-lg text-white hover:text-indigo-300 transition-colors">${project.name} &rarr;</a>
                        <p class="text-gray-300 text-sm my-2">${project.description}</p>
                        <div class="flex flex-wrap gap-2 mt-2">
                            ${project.tech.map(t => `<span class="bg-gray-700 text-gray-200 text-xs font-medium px-2 py-1 rounded-full">${t}</span>`).join('')}
                        </div>
                    </div>
                `).join('');
            }
            
            infoContent.innerHTML = contentHTML;
            infoPanel.classList.remove('translate-y-full');
            
            gsap.to(introText, { opacity: 0, duration: 0.3, onComplete: () => introText.style.display = 'none' });
            gsap.to(header, { opacity: 0.3, duration: 0.5 });
        }

        function hideInfoPanel() {
            infoPanel.classList.add('translate-y-full');
            introText.style.display = 'block';
            gsap.to(introText, { opacity: 1, duration: 0.5, delay: 0.3 });
            gsap.to(header, { opacity: 1, duration: 0.5 });

            // Animate camera back to default position
            gsap.to(camera.position, {
                x: 0, y: 0, z: 30,
                duration: 1,
                ease: 'power2.inOut',
                onUpdate: () => controls.update()
            });
            gsap.to(controls.target, {
                x: 0, y: 0, z: 0,
                duration: 1,
                ease: 'power2.inOut',
                onUpdate: () => controls.update()
            });
        }

        // --- 4. 3D OBJECTS ---
        function createCentralObject() {
            const geometry = new THREE.IcosahedronGeometry(4, 1);
            const material = new THREE.MeshStandardMaterial({
                color: 0x6366f1,
                metalness: 0.6,
                roughness: 0.3,
                wireframe: true,
                emissive: 0x3333ff,
                emissiveIntensity: 0.2
            });
            centralObject = new THREE.Mesh(geometry, material);
            scene.add(centralObject);
        }

        function createDataNodes() {
            const dataKeys = Object.keys(resumeData).filter(k => ['about', 'skills', 'experience', 'projects'].includes(k));
            const angleStep = (2 * Math.PI) / dataKeys.length;

            const fontLoader = new FontLoader();
            fontLoader.load('https://unpkg.com/three@0.157.0/examples/fonts/helvetiker_regular.typeface.json', (font) => {
                dataKeys.forEach((key, index) => {
                    const angle = index * angleStep;
                    const radius = 12;
                    const x = Math.cos(angle) * radius;
                    const y = Math.sin(angle) * radius;

                    // Node sphere
                    const geometry = new THREE.SphereGeometry(0.8, 32, 32);
                    const material = new THREE.MeshStandardMaterial({
                        color: new THREE.Color().setHSL(index / dataKeys.length, 0.7, 0.6),
                        metalness: 0.5,
                        roughness: 0.4,
                    });
                    const node = new THREE.Mesh(geometry, material);
                    node.position.set(x, y, 0);
                    node.userData = { id: key, type: 'node' };
                    scene.add(node);
                    nodes.push(node);
                    
                    // Text label
                    const textMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.8 });
                    const textGeometry = new TextGeometry(resumeData[key].title, {
                        font: font,
                        size: 0.5,
                        height: 0.05,
                    });
                    textGeometry.center();
                    const textMesh = new THREE.Mesh(textGeometry, textMaterial);
                    textMesh.position.set(x * 1.2, y * 1.2, 0);
                    scene.add(textMesh);
                    node.userData.label = textMesh;
                });
                loaderDOM.querySelector('p').textContent = 'Finalizing scene...';
            });
        }
        
        function createStars() {
            const starVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = THREE.MathUtils.randFloatSpread(2000);
                const y = THREE.MathUtils.randFloatSpread(2000);
                const z = THREE.MathUtils.randFloatSpread(2000);
                starVertices.push(x, y, z);
            }
            const starGeometry = new THREE.BufferGeometry();
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const starMaterial = new THREE.PointsMaterial({ color: 0xaaaaaa, size: 0.7 });
            stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);
        }

        // --- 5. INTERACTIVITY & ANIMATION ---
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
        }
        
        function onClick(event) {
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(nodes);

            if (intersects.length > 0) {
                const clickedNode = intersects[0].object;
                
                // Animate camera to focus on the clicked node
                const targetPosition = clickedNode.position.clone().multiplyScalar(1.5);
                gsap.to(camera.position, {
                    x: targetPosition.x,
                    y: targetPosition.y,
                    z: targetPosition.z + 5, // A bit of distance
                    duration: 1.5,
                    ease: 'power3.inOut',
                    onUpdate: () => controls.update()
                });
                gsap.to(controls.target, {
                    x: clickedNode.position.x,
                    y: clickedNode.position.y,
                    z: clickedNode.position.z,
                    duration: 1.5,
                    ease: 'power3.inOut',
                    onUpdate: () => controls.update()
                });

                showInfoPanel(clickedNode.userData.id);
            }
        }

        function animate() {
            requestAnimationFrame(animate);

            // Update objects
            const time = Date.now() * 0.0005;
            centralObject.rotation.y += 0.002;
            centralObject.rotation.x += 0.001;
            
            nodes.forEach((node, i) => {
                node.position.z = Math.sin(time + i * 0.5) * 5;
                if(node.userData.label) {
                    node.userData.label.lookAt(camera.position);
                }
            });

            stars.rotation.y += 0.0001;

            // Raycasting for hover effect
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(nodes);

            if (intersects.length > 0) {
                if (intersectedObject !== intersects[0].object) {
                    if (intersectedObject) {
                        gsap.to(intersectedObject.scale, { x: 1, y: 1, z: 1, duration: 0.3 });
                        gsap.to(intersectedObject.material, { emissiveIntensity: 0, duration: 0.3 });
                    }
                    intersectedObject = intersects[0].object;
                    gsap.to(intersectedObject.scale, { x: 1.5, y: 1.5, z: 1.5, duration: 0.3 });
                    gsap.to(intersectedObject.material, { emissiveIntensity: 0.5, duration: 0.3 });
                    document.body.style.cursor = 'pointer';
                }
            } else {
                if (intersectedObject) {
                    gsap.to(intersectedObject.scale, { x: 1, y: 1, z: 1, duration: 0.3 });
                    gsap.to(intersectedObject.material, { emissiveIntensity: 0, duration: 0.3 });
                }
                intersectedObject = null;
                document.body.style.cursor = 'default';
            }

            controls.update();
            renderer.render(scene, camera);
        }

        init();

    </script>
</body>
</html>

